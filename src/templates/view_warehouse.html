{% extends "base.html" %}

{% block title %}{{ warehouse.name }} - Warehouse App{% endblock %}

{% block content %}
<h2>{{ warehouse.name }}</h2>

<div class="warehouse-card">
    {% if warehouse.description %}
    <div class="warehouse-description">{{ warehouse.description }}</div>
    {% endif %}
    <div class="warehouse-info">
        <p><strong>Capacity:</strong> {{ warehouse.varasto.tilavuus }}</p>
        <p><strong>Current Amount:</strong> {{ warehouse.varasto.saldo }}</p>
        <p><strong>Space Available:</strong> {{ warehouse.varasto.paljonko_mahtuu() }}</p>
    </div>
    
    <div class="progress-bar">
        {% set fill_percentage = (warehouse.varasto.saldo / warehouse.varasto.tilavuus * 100) if warehouse.varasto.tilavuus > 0 else 0 %}
        <div class="progress-bar-fill" style="width: {{ fill_percentage }}%"></div>
    </div>
</div>

<h3>Add Content</h3>
<form method="POST" action="{{ url_for('add_to_warehouse', warehouse_id=warehouse.id) }}" class="inline-form">
    <input type="number" name="amount" value="10" min="0" step="0.1" style="width: 100px;">
    <button type="submit" class="btn btn-success">Add</button>
</form>

<h3 style="margin-top: 20px;">Remove Content</h3>
<form method="POST" action="{{ url_for('remove_from_warehouse', warehouse_id=warehouse.id) }}" class="inline-form">
    <input type="number" name="amount" value="10" min="0" step="0.1" style="width: 100px;">
    <button type="submit" class="btn btn-danger">Remove</button>
</form>

<div style="margin-top: 30px;">
    <a href="{{ url_for('edit_warehouse', warehouse_id=warehouse.id) }}" class="btn">Edit Warehouse</a>
    <a href="{{ url_for('index') }}" class="btn">Back to List</a>
    <form method="POST" action="{{ url_for('delete_warehouse', warehouse_id=warehouse.id) }}" style="display: inline;">
        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this warehouse?')">Delete Warehouse</button>
    </form>
</div>
{% endblock %}
