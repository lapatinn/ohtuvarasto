{% extends "base.html" %}

{% block title %}Warehouses - Warehouse App{% endblock %}

{% block content %}
<h2>Your Warehouses</h2>

{% if warehouses %}
    {% for id, warehouse in warehouses.items() %}
    <div class="warehouse-card">
        <h3>{{ warehouse.name }}</h3>
        <div class="warehouse-info">
            <strong>Capacity:</strong> {{ warehouse.varasto.tilavuus }} |
            <strong>Current:</strong> {{ warehouse.varasto.saldo }} |
            <strong>Available:</strong> {{ warehouse.varasto.paljonko_mahtuu() }}
        </div>
        <div class="progress-bar">
            {% set fill_percentage = (warehouse.varasto.saldo / warehouse.varasto.tilavuus * 100) if warehouse.varasto.tilavuus > 0 else 0 %}
            <div class="progress-bar-fill" style="width: {{ fill_percentage }}%"></div>
        </div>
        <a href="{{ url_for('view_warehouse', warehouse_id=id) }}" class="btn">View</a>
        <a href="{{ url_for('edit_warehouse', warehouse_id=id) }}" class="btn">Edit</a>
    </div>
    {% endfor %}
{% else %}
    <p>No warehouses yet. <a href="{{ url_for('create_warehouse') }}">Create one!</a></p>
{% endif %}
{% endblock %}
